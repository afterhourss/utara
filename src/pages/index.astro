---
import Layout from '../layouts/Layout.astro';
import { siteConfig } from '../config/site';
import Button from '../components/Button';
import Projectbar from '../components/Projectbar'
import treeImage from '../assets/tree.jpg'
import excelLogo from '../assets/excel.png'
import powerLogo from '../assets/powerbi.png'
import postgreLogo from '../assets/postgre.png'
import twLogo from '../assets/Frame-1.png'
import astroLogo from '../assets/Frame-4.png'
import { Image } from 'astro:assets';
import Footer from '../components/Footer';
import {getCollection} from 'astro:content'
const allBlogPosts = await getCollection('blog') 
const brandLogo = [
	{
		name: 'excel',
		src: excelLogo 
	},
	{
		name: 'powerbi',
		src: powerLogo 
	},
	{
		name: 'postgre',
		src: postgreLogo 
	},
	{
		name: 'astro',
		src: astroLogo
	},
	{
		name: 'tw',
		src: twLogo
	},
]
---

<Layout title={siteConfig.profile.name}>
	<div class="lg:w-[70%] px-5 lg:px-20 mx-auto">
		<div class="border-b border-[#2C2C2C]">
			<div class="text-[#9C9C9C] py-10 underline text-xl" id="about">About me</div>
			<div class="flex gap-8 pb-8 flex-col xl:flex-row">	
				<Image src={treeImage} alt="some tree" class="rounded-md object-fill w-72 h-72" loading='eager'/>
				<div class="flex flex-col justify-between gap-4">
					<div class="text-[#5B5B5B] text-xl text-justify" set:html={siteConfig.profile.description}>
					</div>
					<div class="flex gap-4 justify-between flex-col lg:flex-row">
						<div class="flex gap-2 flex-wrap">
							<a href="#target"><Button title="See what i wrote" bg={true}/></a>
							<a href={siteConfig.profile.cvUrl} target="_blank"><Button title="Download my CV" bg={false}/></a>
						</div>
						<div class="flex gap-7 flex-wrap">
							{brandLogo.map((item) => {
								return <Image src={item.src} alt="" class="object-contain grayscale-[50%] hover:grayscale-0 transition-all w-10" loading='eager'/>
							})}
						</div>
					</div>
				</div>
			</div>
		</div>

	<div id="target">
		<div class="text-[#9C9C9C] py-10 underline text-xl">Posts</div>
		<div class="space-y-10">
			{allBlogPosts.map(item => <Projectbar projectName={item.data.title} image={item.data.image} desc={item.data.desc} source={item.data.url} link={item.id}/>)}
		</div>
	</div>
	<Footer/>
	</div>
</Layout>
<script>
	document.querySelectorAll('a[href^="#"]').forEach(anchor => {
		anchor.addEventListener('click', function(e){
			e.preventDefault();

			const target = document.querySelector(this.getAttribute('href'));

			if (target) {
				target.scrollIntoView({behavior: 'smooth'})


				setTimeout(() => {
					target.classList.add('animate-flashOut')
					setTimeout(() => {
						target.classList.remove('animate-flashOut')
					},1000)
				}, 500)
			}
		})
	})
</script>